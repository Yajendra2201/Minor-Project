{% extends 'admin/base.html' %}

{% block title %}Profile title{% endblock title %}

{% block body %}

<img class="d-block w-100" src="{{url_for('static',filename='img/p.jpg')}}" style="opacity: 40%;">

<div class="container justify-content-center my-2" style="margin: 3% 15%; position: absolute; top: 5%; color: black;">
     
{% with messages = get_flashed_messages(with_categories=true) %}  
{% if messages %}  
      {% for cato,message in messages %}
  
      <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
        </symbol>
        <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
          <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
        </symbol>
      </svg>
      {% if cato=='success' %}
      {% set sym="#check-circle-fill"%}
      {% else %}
      {% set sym="#exclamation-triangle-fill"%}
      {% endif %}
    
      <div class="alert alert-{{cato}} alert-dismissible d-flex align-items-center  justify-content-between" role="alert" style="margin: 23px -20px 0% -20%;">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="{{sym}}"/></svg>
        {{message}}
        <button type="button" class="btn btn-light btn-outline-{{cato}} btn-sm" data-bs-dismiss="alert" aria-label="Close" style="margin:0% 0%">Dismiss</button>      
      </div>
    
      {% endfor %}  
{% endif %}  
{% endwith %}

  <h1 style="margin: 4% 0%;">My Profile</h1>

<form action="/profileupdate" method="POST">
  <h6>
    <div class="form-group row my-3">
        <label for="fname" class="col-sm-2 col-form-label">First Name</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" name="fname" id="fname" value="{{r.fname}}" style="width: 50%;" readonly>
        </div>
      </div>
  
      <div class="form-group row my-3">
        <label for="lname" class="col-sm-2 col-form-label">Last Name</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="lname" name="lname" value="{{r.lname}}" style="width: 50%;"readonly>
        </div>
      </div>
     
 <fieldset class="form-group my-3">
    <div class="row">
      <legend class="col-form-label col-sm-2 pt-0">Gender</legend>
      
      {% if r.gender=='Male' %}
            
      {% set male='checked'%}
      {% set female=''%}

      {% else %}

      {% set female='checked'%}
      {% set male=''%}

      {% endif %}
      

      <div class="col-sm-10">
        <div class="form-check my-2">
          <input class="form-check-input" type="radio" name="gender" id="gridRadios1" value="Male" {{male}}>
          <label class="form-check-label" for="gridRadios1">
            Male
          </label>
        </div>
        <div class="form-check my-2">
          <input class="form-check-input" type="radio" name="gender" id="gridRadios2" value="Female" {{female}}>
          <label class="form-check-label" for="gridRadios2">
            Female
          </label>
        </div>
      </div>
    </div>
  </fieldset>

  <div class="form-group row my-3">
    <label for="phone" class="col-sm-2 col-form-label">Phone Number</label>
    <div class="col-sm-10">
      <input type="number" class="form-control" id="phone" name="phone" value="{{r.phone}}" style="width: 50%;" readonly>
    </div>
  </div>
 
  <div class="form-group row my-3">
    <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
    <div class="col-sm-10">
      <input type="email" class="form-control" id="inputEmail3" name="email" value="{{r.email}}" style="width: 50%;" readonly>
    </div>
  </div>

</h6> 
</form>

<h1 style="margin: 4% 0%;">My Feedbacks</h1>


{% if f|length==0 %}
<div class="alert alert-info text-center" role="alert">
    No Feedbacks Availabe!!!
  </div>
{% else %}
<table class="table table-hover my-4 text-center">
    <thead> 
      <tr>
        <th scope="col"  style="width:10%">S No</th>
        <th scope="col">Feedbacks</th>
        <th scope="col">Time</th>
        <th scope="col">Delete Feedback</th>
      </tr>
    </thead>
    <tbody>
{% for rows in f %}
<tr>
<th scope="row">{{loop.index}}</th>
<td>{{rows.Feedb}}</td>
<td>{{rows.Time}}</td>

<td>
  <a href="/admin/delete/{{rows.Email}}/{{rows.sno}} " type="button" class="btn btn-outline-dark btn-sm">Delete</a>
</td>

</tr>
{% endfor %}
{% endif %}
</tbody>
</table>

</div>

<div class="container justify-content-center my-2" style="margin: 3% 15%; color: black;">


  <h1 style="margin: 4% 0%;">My Queries</h1>


  {% if c|length==0 %}
  <div class="alert alert-info text-center" role="alert">
      No Queries Availabe!!!
    </div>
  {% else %}
  <table class="table table-hover my-4 text-center">
      <thead> 
        <tr>
          <th scope="col"  style="width:10%">S No</th>
          <th scope="col">Queries</th>
          <th scope="col" colspan="2">Response</th>
        </tr>
      </thead>
      <tbody>
  {% for rows in c %}
  <tr>
  <th scope="row">{{loop.index}}</th>
  <td>{{rows.msg}}</td>
    <form action="/admin/response/{{rows.email}}/{{rows.sno}}" method="POST">
      <td>
      <textarea class="form-control form-control-sm" type="text" name="response" placeholder="Response" rows="2" cols="5"></textarea> 
      </td>
      <td>
      <button type="submit" class="btn btn-outline-dark btn-sm ">Submit</button>
      </td>
    </form>
  
  </tr>
  {% endfor %}
  {% endif %}
  </tbody>
  </table>
  

</div>

{% endblock body %}